#!/bin/bash

# Pre-commit hook for Phunkie projects
# Runs lint and tests before allowing commit

set -e

echo "ğŸ” Running pre-commit checks..."

# Run lint (cs-check + phpstan)
echo ""
echo "ğŸ“‹ Running lint checks..."
if ! composer lint; then
    echo ""
    echo "âŒ Lint checks failed. Please fix the issues before committing."
    echo "   Run 'composer cs-fix' to auto-fix code style issues."
    exit 1
fi

# Run tests
echo ""
echo "ğŸ§ª Running tests..."
if ! composer test; then
    echo ""
    echo "âŒ Tests failed. Please fix the issues before committing."
    exit 1
fi

echo ""
echo "âœ… All pre-commit checks passed!"
